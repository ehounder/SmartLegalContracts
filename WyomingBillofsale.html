<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Wyoming Bill of Sale</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="/static/css/styleXUMM36.css">
    <!-- External Scripts -->
    <script src="https://unpkg.com/xrpl@2.0.0/build/xrpl-latest-min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xrpl-client@2.0.4/dist/browser.min.js"></script>
    <script src="https://xumm.app/assets/cdn/xumm-sdk.min.js"></script>
    <script src="five-bells-condition.min.js"></script>
    <script src="buffer.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js" integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbzZ8zBps+dvLusV+eNQATqgA/HdeKFVgA5v3S/cIrLF7QnIg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body>
    <div id="WyomingBillOfSaleForm">
        <h2 style="color:rgb(5, 5, 5); font-size: 16px; text-align:center">Wyoming Motor Vehicle Bill of Sale</h2>
        <br>
        <p>This Bill of Sale has been made on
            <span class="form-field-container">
                <span class="input-container">
                    <input id="saleDateDayField" type="text" placeholder="Day Month Year" maxlength="17" />
                    <label class="textWidthCalculator" aria-hidden="true"></label>
                    <label id="saleDateLabel"></label>
                </span>
            </span>
            in the County of
            <span class="form-field-container">
                <span class="input-container">
                    <input id="countyField" type="text" placeholder="County" maxlength="12" />
                    <label class="textWidthCalculator" aria-hidden="true"></label>
                    <label id="countyLabel"></label>
                </span>
            </span>
            in the <strong>State of Wyoming</strong> between the following parties:
            <span class="form-field-container">
                <span class="input-container">
                    <input id="buyerNameField" type="text" placeholder="Buyer Name" maxlength="30" />
                    <label class="textWidthCalculator" aria-hidden="true"></label>
                    <label id="buyerNameFirstLabel"></label>
                </span>
            </span>
            <span class="form-field-container">
                <span class="input-container">
                    <input id="buyerIndividualOrBusinessField" type="text" placeholder="an individual or business" maxlength="14" />
                    <label class="textWidthCalculator" aria-hidden="true"></label>
                    <label id="buyerIndividualOrBusinessLabel"></label>
                </span>
            </span>
            (hereinafter referred to as the "Buyer") with a mailing address of
            <span class="form-field-container">
                <span class="input-container">
                    <input id="buyerAddressStreetField" type="text" placeholder="Buyer Street Address" maxlength="30" />
                    <span class="textWidthCalculator"></span>
                    <label id="buyerStreetLabel"></label>
                </span>
            </span>
            <span class="form-field-container">
                <span class="input-container">
                    <input id="buyerAddressCityField" type="text" placeholder="Buyer City" maxlength="30" />
                    <span class="textWidthCalculator"></span>
                     <label id="buyerCityLabel"></label>
                </span>
            </span>
            <span class="form-field-container">
                <span class="input-container">
                    <input id="buyerStateField" type="text" placeholder="Buyer State" maxlength="30" />
                    <span class="textWidthCalculator"></span>
                    <label id="buyerStateLabel"></label>
                </span>
            </span>
            <span class="form-field-container">
                <span class="input-container">
                    <input id="buyerZipField" type="text" placeholder="Buyer Zip" maxlength="11" />
                    <span class="textWidthCalculator"></span>
                    <label id="buyerZipLabel"></label>
                </span>
            </span>
            <span class="form-field-container">
                <span class="input-container">
                    <input id="buyerEmailField" type="text" placeholder="Buyer Email" maxlength="30" />
                    <span class="textWidthCalculator"></span>
                    <label id="buyerEmailLabel"></label>
                </span>
            </span>
            Buyer XRP address:
                <span class="form-field-container">
                    <span class="input-container">
                        <input id="buyerXRPaddressField" type="text" placeholder="Buyer XRP Address" maxlength="35" />
                        <span class="textWidthCalculator"></span>
                        <label id="buyerXRPaddressLabel"></label>
                    </span>
                </span>
            and,
            <span class="form-field-container">
                <span class="input-container">
                    <input id="sellerNameField" type="text" placeholder="Seller Name" maxlength="30" />
                    <span class="textWidthCalculator"></span>
                    <label id="sellerNameFirstLabel"></label>
                </span>
            </span> 
            <span class="form-field-container">
                <span class="input-container">
                    <input id="sellerIndividualOrBusinessField" type="text" placeholder="an individual or business" maxlength="14" />
                    <span class="textWidthCalculator"></span>
                    <label id="sellerIndividualOrBusinessLabel"></label>
                </span>
            </span>
            (hereinafter referred to as the "Seller") with a mailing address of
            <span class="form-field-container">
                <span class="input-container">
                    <input id="sellerAddressStreetField" type="text" placeholder="Seller Street Address" maxlength="30" />
                    <span class="textWidthCalculator"></span>
                    <label id="sellerStreetLabel"></label>
                </span>
            </span>
            <span class="form-field-container">
                <span class="input-container">
                    <input id="sellerAddressCityField" type="text" placeholder="Seller City" maxlength="30" />
                    <span class="textWidthCalculator"></span>
                    <label id="sellerCityLabel"></label>
                </span>
            </span>
            <span class="form-field-container">
                <span class="input-container">
                    <input id="sellerStateField" type="text" placeholder="Seller State" maxlength="30" />
                    <span class="textWidthCalculator"></span>
                    <label id="sellerStateLabel"></label>
                </span>
            </span>
            <span class="form-field-container">
                <span class="input-container">
                    <input id="sellerZipField" type="text" placeholder="Seller Zip" maxlength="11" />
                    <span class="textWidthCalculator"></span>
                    <label id="sellerZipLabel"></label>
                </span>
            </span>
            <span class="form-field-container">
                <span class="input-container">
                    <input id="sellerEmailField" type="text" placeholder="Seller Email" maxlength="30" />
                    <span class="textWidthCalculator"></span>
                    <label id="sellerEmailLabel"></label>
                </span>
            </span>
            Seller XRP address:
                <span class="form-field-container">
                    <span class="input-container">
                        <input id="sellerXRPaddressField" type="text" placeholder="Seller XRP Address" maxlength="35" />
                        <span class="textWidthCalculator"></span>
                        <label id="sellerXRPaddressLabel"></label>
                    </span>
                </span>.
        </p>
        <p style="text-indent: 20px">The parties agree in exchange for possession and ownership of the following motor vehicle (the "Vehicle"):</p>
        <p>
            Vehicle Type:
            <span class="form-field-container">
                <span class="input-container">
                    <input id="vehicleTypeField" type="text" placeholder="Vehicle Type" maxlength="11" />
                    <span class="textWidthCalculator"></span>
                    <label id="vehicleTypeLabel"></label>
                </span>
            </span>
            Make:
            <span class="form-field-container">
                <span class="input-container">
                    <input id="makeField" type="text" placeholder="Make" maxlength="15" />
                    <span class="textWidthCalculator"></span>
                    <label id="makeLabel"></label>
                </span>
            </span>
            Model:
            <span class="form-field-container">
                <span class="input-container">
                    <input id="modelField" type="text" placeholder="Model" maxlength="15" />
                    <span class="textWidthCalculator"></span>
                    <label id="modelLabel"></label>
                </span>
            </span>
            Body Type:
            <span class="form-field-container">
                <span class="input-container">
                    <input id="bodyTypeField" type="text" placeholder="Body Type" maxlength="10" />
                    <span class="textWidthCalculator"></span>
                    <label id="bodyTypeLabel"></label>
                </span>
            </span>
            Year:
            <span class="form-field-container">
                <span class="input-container">
                    <input id="yearField" type="text" placeholder="Year" maxlength="4" />
                    <span class="textWidthCalculator"></span>
                    <label id="yearLabel"></label>
                </span>
            </span>
            Vehicle I.D. Number (VIN):
            <span class="form-field-container">
                <span class="input-container">
                    <input id="vinField" type="text" placeholder="VIN" maxlength="30" />
                    <span class="textWidthCalculator"></span>
                    <label id="vinLabel"></label>
                </span>
            </span>
            Odometer:
            <span class="form-field-container">
                <span class="input-container">
                    <input id="odometerField" type="text" placeholder="Odometer" maxlength="8" />
                    <span class="textWidthCalculator"></span>
                    <label id="odometerLabel"></label>
                </span>
            </span>
        </p>
<!-- ===================================== Purchase Price Section ================================== -->
        <p id="left" style="text-indent: 20px">
            The Purchase Price the Buyer hereby pays to the Seller for said Vehicle is:
            <span class="form-field-container">
                <span class="input-container">
                    <input id="purchaseAmountField" type="text" placeholder="Purchase Amount" maxlength="12" />
                    <span class="textWidthCalculator"></span>
                    <label id="purchaseAmountLabel"></label>
                </span>
            </span> =
            <strong>
                <label id="xrpPurchaseAmountLabel">0.0000</label> XRP
            </strong>(the "<strong>Purchase Price</strong>"), wherein
            <strong>1 XRP = $<label id="xrpusdLabel">0.00</label></strong>, 
            as further agreed via signing with their respective Xaman wallet XRP addresses:
        </p>
<!-- ========================================= NOT AUTHORIZED ADDRESS =================================== -->
        <strong>
            <label class="mt-3 h4" style="color: #bb0a1e;" id="notAuthorizedAddressLabel"></label>
        </strong>
        <button class="button-save" style="display: none;" id="notAuthorizedAddressLogoutButton">Logout</button>

<!-- ============================================= Signing Section ====================================== -->
        <br>
        <div class="row">
          <div class="column" style="padding-right: 10px;">
            <p><strong><label id="sellerNameSecondLabel"></label></strong></p>
            <p>
                <span class="form-field-container">
                    <span class="input-container">
                        <input id="signingSellerAgentNameField" type="text" placeholder="Seller Agent Name" maxlength="30" />
                        <span class="textWidthCalculator"></span>
                        <label id="signingSellerAgentNameLabel"></label>
                    </span>
                </span>
                <span class="form-field-container">
                    <span class="input-container">
                        <input id="signingSellerAgentTitleField" type="text" placeholder="Seller Agent Title" maxlength="30" />
                        <span class="textWidthCalculator"></span>
                        <label id="signingSellerAgentTitleLabel"></label>
                    </span>
                </span>
            </p>
            <p>
                <label id="step_1" style="display: inline-block; margin-right: 0px;">1. </label>
                <button class="button-long" style="display: inline-block; vertical-align: middle;" id="sellerSignIn">Seller Sign via Xaman Wallet</button>
            </p>
            <p>
                Seller: 
                <strong>
                    <label id="signedBySellerAgentName" style="font-size: 16px; font-family: 'Brush Script MT', cursive;">  </label>
                    <label id="signedBySellerAgentTitle" style="font-size: 16px; font-family:'Brush Script MT', cursive;"></label>
                </strong>
            </p>
            <p>Signed with XRP Address: </p>
            <p><strong><label class="mt-3 h4" id="sub_1"></label></strong></p>
            <p>Date: 
                <strong>
                    <label id="sellerSignedDateLabel"></label>
                </strong>
            </p>
            <p>
                <label id="step_2" style="display: inline-block; margin-right: 0px;">2. </label>
                <button class="button-XUMM" style="display: inline-block; vertical-align: middle;" id="sellerLogout">Seller Logout</button>
            </p>
         </div>
         <div class="column">
                <p><strong><label id="buyerNameSecondLabel"></label></strong></p>
                <p>
                <span class="form-field-container">
                    <span class="input-container">
                        <input id="signingBuyerAgentNameField" type="text" placeholder="Buyer Agent Name" maxlength="40" />
                        <span class="textWidthCalculator"></span>
                         <label id="signingBuyerAgentNameLabel"></label>
                    </span>
                </span>
                <span class="form-field-container">
                    <span class="input-container">
                        <input id="signingBuyerAgentTitleField" type="text" placeholder="Buyer Agent Title" maxlength="40" />
                        <span class="textWidthCalculator"></span>
                        <label id="signingBuyerAgentTitleLabel"></label>
                    </span>
                </span>
            </p>
            <p>
                <label id="step_3" style="display: inline-block; margin-right: 0px;">3. </label>
                <button class="button-long" style="display: inline-block; vertical-align: middle;" id="buyerSignIn">Buyer Sign via Xaman Wallet</button>
            </p>
            <p>
                Buyer:
                <strong>
                    <label id="signedByBuyerAgentName" style="font-size: 16px; font-family: 'Brush Script MT', cursive;">  </label>
                    <label id="signedByBuyerAgentTitle" style="font-size: 16px; font-family:'Brush Script MT', cursive;"></label>
                </strong>
            </p>
            <p>Signed with XRP Address: </p>
            <p><strong><label class="mt-3 h4" id="sub_2">(please sign after Seller logs out)</label></strong></p>
            <p>
                Date: 
                <strong>
                    <label id="buyerSignedDateLabel"></label>
                </strong>
            </p>
          </div>
        </div>
            <p style="text-align:center">
                <label id="step_4" style="display: inline-block; margin-right: 0px;">4. </label>
                <button class="button-long" style="display: inline-block; vertical-align: middle;" id="buyerPaymentButton">Buyer XRP Payment</button>
                <strong><label id="paymentPaidLabel" style="font-size: 12px;"></label></strong>
            </p>
            <p style="text-align:center">
                <label id="step_5" style="display: inline-block; margin-right: 0px;">5. </label>
                <button class="button-long" style="display: inline-block; vertical-align: middle;" id="getPaymentHashButton" onclick="getPaymentHash()">Get Payment XRPL tx.hash</button>
            </p>
            <p style="text-align:center">
                <strong>
                    <label id="paymentHashLabel" style="font-size: 12px;">tx.hash: </label>
                </strong>
                <br>
            </p>
            <p style="text-align:center">
                <strong>
                    <label id="paymentSignedDateLabel">Date: </label>
                </strong>
            </p>
            <p style="text-align:center">
                <label id="step_6" style="display: inline-block; margin-right: 0px;">6. </label>
                <button class="button-XUMM" style="display: inline-block; vertical-align: middle;" id="buyerLogout">Buyer Logout</button>
            </p>
            <p style="text-align:center">
                <label id="step_7" style="display: inline-block; margin-right: 0px;">7. </label>
                <button class="button-long" style="display: inline-block; vertical-align: middle;" id='generatePDF'>Generate PDF Download</button>
            </p>
<!-- ===================================== NOTARY STATEMENT ====================================== -->
        <p style="color:rgb(5, 5, 5); font-size: 32px; text-align:center">__________________________________________________________</p>
        <h3 style="color:rgb(5, 5, 5); font-size: 16px; text-align:center">Notary Statement</h3>
            <p>Before me, ____________________________________, a notary public in _____________________________________</p>
            <p>County, State of __________________________, personally appeared _________________________________________</p>
            <p>___________________________________________________ on (date) _______________________________________.</p>
            <p>___________________________________________ &emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13; 
            ____________________________________________</p>
            <p>&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13; Notary Public Signature &emsp13;&emsp13;&emsp13;&emsp13;&emsp13;
            &emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;
            &emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13;&emsp13; Commission Expiration Date</p>
    </div>
<!-- ===================================== END OF BILL OF SALE FORM =================================== -->

<!-- ============================ JAVASCRIPT FOR DYNAMIC INPUT WIDTH AND CALCULATIONS ======================= -->
    <script>
        // Function to adjust the width of an input based on its content
        function adjustWidth(input, calculator) {
            const inputStyles = window.getComputedStyle(input);
            calculator.style.font = inputStyles.font;
            calculator.style.fontSize = inputStyles.fontSize;
            calculator.style.fontWeight = inputStyles.fontWeight;
            calculator.style.fontFamily = inputStyles.fontFamily;
            
            calculator.textContent = input.value || input.placeholder;
        
            // Add padding to mimic the input's padding
            const padding = parseInt(inputStyles.paddingLeft) + parseInt(inputStyles.paddingRight);
            input.style.width = (calculator.offsetWidth + padding) + "px";
        }

    // Select all Label input fields and their corresponding calculators
        document.addEventListener("DOMContentLoaded", () => {
            const inputs = document.querySelectorAll('.input-container input[type="text"]');
            const calculators = document.querySelectorAll('.textWidthCalculator');

            // Ensure each input has a corresponding calculator
            if (inputs.length !== calculators.length) {
                console.error("Mismatch between inputs and width calculators.");
                return;
            }

            inputs.forEach((input, index) => {
                const calculator = calculators[index];

                // Initial width adjustment
                adjustWidth(input, calculator);

                // Event listeners for dynamic adjustment
                input.addEventListener("input", () => adjustWidth(input, calculator));
                input.addEventListener("focus", () => adjustWidth(input, calculator));
                input.addEventListener("blur", () => adjustWidth(input, calculator));
            });
        
    // saleDateLabel =============================================================
            const saleDateDayField = document.getElementById('saleDateDayField');
            const saleDateLabel = document.getElementById('saleDateLabel');
        
            saleDateDayField.addEventListener('input', () => {
                const saleDate = saleDateDayField.value.trim(); // Trim to remove extra spaces
                if (saleDate.length > 0) {
                    saleDateLabel.innerText = saleDate;
                } else {
                    saleDateLabel.innerText = '';
                }
            });
        
            saleDateDayField.addEventListener('blur', () => {
                const saleDate = saleDateDayField.value.trim();
                if (saleDate.length > 0) {
                    saleDateDayField.style.display = 'none'; // Hide input field
                   saleDateLabel.style.display = 'inline'; // Show the label
                }
            });
        
            saleDateLabel.addEventListener('click', () => {
                saleDateDayField.style.display = 'inline'; // Show input field again on label click
                saleDateDayField.focus(); // Focus back on the input field for editing
                saleDateLabel.style.display = 'none'; // Hide the label while editing
            });
        
    // countyLabel ===============================================================
            const countyField = document.getElementById('countyField');
            const countyLabel = document.getElementById('countyLabel');
        
            countyField.addEventListener('input', () => {
                const county = countyField.value.trim(); // Trim to remove extra spaces
                if (county.length > 0) {
                    countyLabel.innerText = county;
                } else {
                    countyLabel.innerText = '';
                }
            });
        
            countyField.addEventListener('blur', () => {
                const county = countyField.value.trim();
                if (county.length > 0) {
                    countyField.style.display = 'none'; // Hide input field
                   countyLabel.style.display = 'inline'; // Show the label
                }
            });
        
            countyLabel.addEventListener('click', () => {
                countyField.style.display = 'inline'; // Show input field again on label click
                countyField.focus(); // Focus back on the input field for editing
                countyLabel.style.display = 'none'; // Hide the label while editing
            });
            
    // buyerNameFirstLabel ========================================================    
            const buyerNameField = document.getElementById('buyerNameField');
            const buyerNameFirstLabel = document.getElementById('buyerNameFirstLabel');
            const buyerNameSecondLabel = document.getElementById('buyerNameSecondLabel');
        
            buyerNameField.addEventListener('input', () => {
                const buyerName = buyerNameField.value.trim(); // Trim to remove extra spaces
                if (buyerName.length > 0) {
                    buyerNameFirstLabel.innerText = buyerName + ',';
                    buyerNameSecondLabel.innerText = `${buyerName}, authorized signing agent:`;
                } else {
                    buyerNameFirstLabel.innerText = '';
                    buyerNameSecondLabel.innerText = '';
                }
            });
        
            buyerNameField.addEventListener('blur', () => {
                const buyerName = buyerNameField.value.trim();
                if (buyerName.length > 0) {
                    buyerNameField.style.display = 'none'; // Hide input field
                    buyerNameFirstLabel.style.display = 'inline'; // Show the label
                }
            });
        
            buyerNameFirstLabel.addEventListener('click', () => {
                buyerNameField.style.display = 'inline'; // Show input field again on label click
                buyerNameField.focus(); // Focus back on the input field for editing
                buyerNameFirstLabel.style.display = 'none'; // Hide the label while editing
            });
        
    // buyerIndividualOrBusinessLabel ===============================================
            const buyerIndividualOrBusinessField = document.getElementById('buyerIndividualOrBusinessField');
            const buyerIndividualOrBusinessLabel = document.getElementById('buyerIndividualOrBusinessLabel');
        
            buyerIndividualOrBusinessField.addEventListener('input', () => {
                const buyerIndividualOrBusiness = buyerIndividualOrBusinessField.value.trim(); // Trim to remove extra spaces
                if (buyerIndividualOrBusiness.length > 0) {
                    buyerIndividualOrBusinessLabel.innerText = buyerIndividualOrBusiness;
                } else {
                    buyerIndividualOrBusinessLabel.innerText = '';
                }
            });
        
            buyerIndividualOrBusinessField.addEventListener('blur', () => {
                const buyerIndividualOrBusiness = buyerIndividualOrBusinessField.value.trim();
                if (buyerIndividualOrBusiness.length > 0) {
                    buyerIndividualOrBusinessField.style.display = 'none'; // Hide input field
                   buyerIndividualOrBusinessLabel.style.display = 'inline'; // Show the label
                }
            });
        
            buyerIndividualOrBusinessLabel.addEventListener('click', () => {
                buyerIndividualOrBusinessField.style.display = 'inline'; // Show input field again on label click
                buyerIndividualOrBusinessField.focus(); // Focus back on the input field for editing
                buyerIndividualOrBusinessLabel.style.display = 'none'; // Hide the label while editing
            });
            
    // buyerStreetLabel ===============================================================
            const buyerAddressStreetField = document.getElementById('buyerAddressStreetField');
            const buyerStreetLabel = document.getElementById('buyerStreetLabel');
        
            buyerAddressStreetField.addEventListener('input', () => {
                const buyerAddressStreet = buyerAddressStreetField.value.trim(); // Trim to remove extra spaces
                if (buyerAddressStreet.length > 0) {
                    buyerStreetLabel.innerText = buyerAddressStreet;
                } else {
                    buyerStreetLabel.innerText = '';
                }
            });
        
            buyerAddressStreetField.addEventListener('blur', () => {
                const buyerAddressStreet = buyerAddressStreetField.value.trim();
                if (buyerAddressStreet.length > 0) {
                    buyerAddressStreetField.style.display = 'none'; // Hide input field
                   buyerStreetLabel.style.display = 'inline'; // Show the label
                }
            });
        
            buyerStreetLabel.addEventListener('click', () => {
                buyerAddressStreetField.style.display = 'inline'; // Show input field again on label click
                buyerAddressStreetField.focus(); // Focus back on the input field for editing
                buyerStreetLabel.style.display = 'none'; // Hide the label while editing
            });
            
    // buyerCityLabel ===============================================================
            const buyerAddressCityField = document.getElementById('buyerAddressCityField');
            const buyerCityLabel = document.getElementById('buyerCityLabel');
        
            buyerAddressCityField.addEventListener('input', () => {
                const buyerAddressCity = buyerAddressCityField.value.trim(); // Trim to remove extra spaces
                if (buyerAddressCity.length > 0) {
                    buyerCityLabel.innerText = buyerAddressCity + ',';
                } else {
                    buyerCityLabel.innerText = '';
                }
            });
        
            buyerAddressCityField.addEventListener('blur', () => {
                const buyerAddressCity = buyerAddressCityField.value.trim();
                if (buyerAddressCity.length > 0) {
                    buyerAddressCityField.style.display = 'none'; // Hide input field
                   buyerCityLabel.style.display = 'inline'; // Show the label
                }
            });
        
            buyerCityLabel.addEventListener('click', () => {
                buyerAddressCityField.style.display = 'inline'; // Show input field again on label click
                buyerAddressCityField.focus(); // Focus back on the input field for editing
                buyerCityLabel.style.display = 'none'; // Hide the label while editing
            });
            
    // buyerStateLabel ===============================================================
            const buyerStateField = document.getElementById('buyerStateField');
            const buyerStateLabel = document.getElementById('buyerStateLabel');
        
            buyerStateField.addEventListener('input', () => {
                const buyerState = buyerStateField.value.trim(); // Trim to remove extra spaces
                if (buyerState.length > 0) {
                    buyerStateLabel.innerText = buyerState;
                } else {
                    buyerStateLabel.innerText = '';
                }
            });
        
            buyerStateField.addEventListener('blur', () => {
                const buyerState = buyerStateField.value.trim();
                if (buyerState.length > 0) {
                    buyerStateField.style.display = 'none'; // Hide input field
                   buyerStateLabel.style.display = 'inline'; // Show the label
                }
            });
        
            buyerStateLabel.addEventListener('click', () => {
                buyerStateField.style.display = 'inline'; // Show input field again on label click
                buyerStateField.focus(); // Focus back on the input field for editing
                buyerStateLabel.style.display = 'none'; // Hide the label while editing
            });
            
    // buyerZipLabel ===============================================================
            const buyerZipField = document.getElementById('buyerZipField');
            const buyerZipLabel = document.getElementById('buyerZipLabel');
        
            buyerZipField.addEventListener('input', () => {
                const buyerZip = buyerZipField.value.trim(); // Trim to remove extra spaces
                if (buyerZip.length > 0) {
                    buyerZipLabel.innerText = buyerZip;
                } else {
                    buyerZipLabel.innerText = '';
                }
            });
        
            buyerZipField.addEventListener('blur', () => {
                const buyerZip = buyerZipField.value.trim();
                if (buyerZip.length > 0) {
                    buyerZipField.style.display = 'none'; // Hide input field
                   buyerZipLabel.style.display = 'inline'; // Show the label
                }
            });
        
            buyerZipLabel.addEventListener('click', () => {
                buyerZipField.style.display = 'inline'; // Show input field again on label click
                buyerZipField.focus(); // Focus back on the input field for editing
                buyerZipLabel.style.display = 'none'; // Hide the label while editing
            });
            
    // buyerEmailLabel ===============================================================
            const buyerEmailField = document.getElementById('buyerEmailField');
            const buyerEmailLabel = document.getElementById('buyerEmailLabel');
        
            buyerEmailField.addEventListener('input', () => {
                const buyerEmail = buyerEmailField.value.trim(); // Trim to remove extra spaces
                if (buyerEmail.length > 0) {
                    buyerEmailLabel.innerText = buyerEmail;
                } else {
                    buyerEmailLabel.innerText = '';
                }
            });
        
            buyerEmailField.addEventListener('blur', () => {
                const buyerEmail = buyerEmailField.value.trim();
                if (buyerEmail.length > 0) {
                    buyerEmailField.style.display = 'none'; // Hide input field
                   buyerEmailLabel.style.display = 'inline'; // Show the label
                }
            });
        
            buyerEmailLabel.addEventListener('click', () => {
                buyerEmailField.style.display = 'inline'; // Show input field again on label click
                buyerEmailField.focus(); // Focus back on the input field for editing
                buyerEmailLabel.style.display = 'none'; // Hide the label while editing
            });
            
    // buyerXRPaddressLabel ===============================================================
            const buyerXRPaddressField = document.getElementById('buyerXRPaddressField');
            const buyerXRPaddressLabel = document.getElementById('buyerXRPaddressLabel');
        
            buyerXRPaddressField.addEventListener('input', () => {
                const buyerXRPaddress = buyerXRPaddressField.value.trim(); // Trim to remove extra spaces
                if (buyerXRPaddress.length > 0) {
                    buyerXRPaddressLabel.innerText = buyerXRPaddress;
                } else {
                    buyerXRPaddressLabel.innerText = '';
                }
            });
        
            buyerXRPaddressField.addEventListener('blur', () => {
                const buyerXRPaddress = buyerXRPaddressField.value.trim();
                if (buyerXRPaddress.length > 0) {
                    buyerXRPaddressField.style.display = 'none'; // Hide input field
                   buyerXRPaddressLabel.style.display = 'inline'; // Show the label
                }
            });
        
            buyerXRPaddressLabel.addEventListener('click', () => {
                buyerXRPaddressField.style.display = 'inline'; // Show input field again on label click
                buyerXRPaddressField.focus(); // Focus back on the input field for editing
                buyerXRPaddressLabel.style.display = 'none'; // Hide the label while editing
            });
        
    // sellerNameFirstLabel ========================================================    
            const sellerNameField = document.getElementById('sellerNameField');
            const sellerNameFirstLabel = document.getElementById('sellerNameFirstLabel');
            const sellerNameSecondLabel = document.getElementById('sellerNameSecondLabel');
        
            sellerNameField.addEventListener('input', () => {
                const sellerName = sellerNameField.value.trim(); // Trim to remove extra spaces
                if (sellerName.length > 0) {
                    sellerNameFirstLabel.innerText = sellerName + ',';
                    sellerNameSecondLabel.innerText = `${sellerName}, authorized signing agent:`;
                } else {
                    sellerNameFirstLabel.innerText = '';
                    sellerNameSecondLabel.innerText = '';
                }
            });
        
            sellerNameField.addEventListener('blur', () => {
                const sellerName = sellerNameField.value.trim();
                if (sellerName.length > 0) {
                    sellerNameField.style.display = 'none'; // Hide input field
                    sellerNameFirstLabel.style.display = 'inline'; // Show the label
                }
            });
        
            sellerNameFirstLabel.addEventListener('click', () => {
                sellerNameField.style.display = 'inline'; // Show input field again on label click
                sellerNameField.focus(); // Focus back on the input field for editing
                sellerNameFirstLabel.style.display = 'none'; // Hide the label while editing
            });
            
    // sellerIndividualOrBusinessLabel ===============================================
            const sellerIndividualOrBusinessField = document.getElementById('sellerIndividualOrBusinessField');
            const sellerIndividualOrBusinessLabel = document.getElementById('sellerIndividualOrBusinessLabel');
        
            sellerIndividualOrBusinessField.addEventListener('input', () => {
                const sellerIndividualOrBusiness = sellerIndividualOrBusinessField.value.trim(); // Trim to remove extra spaces
                if (sellerIndividualOrBusiness.length > 0) {
                    sellerIndividualOrBusinessLabel.innerText = sellerIndividualOrBusiness;
                } else {
                    sellerIndividualOrBusinessLabel.innerText = '';
                }
            });
        
            sellerIndividualOrBusinessField.addEventListener('blur', () => {
                const sellerIndividualOrBusiness = sellerIndividualOrBusinessField.value.trim();
                if (sellerIndividualOrBusiness.length > 0) {
                    sellerIndividualOrBusinessField.style.display = 'none'; // Hide input field
                   sellerIndividualOrBusinessLabel.style.display = 'inline'; // Show the label
                }
            });
        
            sellerIndividualOrBusinessLabel.addEventListener('click', () => {
                sellerIndividualOrBusinessField.style.display = 'inline'; // Show input field again on label click
                sellerIndividualOrBusinessField.focus(); // Focus back on the input field for editing
                sellerIndividualOrBusinessLabel.style.display = 'none'; // Hide the label while editing
            });
            
    // sellerStreetLabel ===============================================================
            const sellerAddressStreetField = document.getElementById('sellerAddressStreetField');
            const sellerStreetLabel = document.getElementById('sellerStreetLabel');
        
            sellerAddressStreetField.addEventListener('input', () => {
                const sellerAddressStreet = sellerAddressStreetField.value.trim(); // Trim to remove extra spaces
                if (sellerAddressStreet.length > 0) {
                    sellerStreetLabel.innerText = sellerAddressStreet;
                } else {
                    sellerStreetLabel.innerText = '';
                }
            });
        
            sellerAddressStreetField.addEventListener('blur', () => {
                const sellerAddressStreet = sellerAddressStreetField.value.trim();
                if (sellerAddressStreet.length > 0) {
                    sellerAddressStreetField.style.display = 'none'; // Hide input field
                   sellerStreetLabel.style.display = 'inline'; // Show the label
                }
            });
        
            sellerStreetLabel.addEventListener('click', () => {
                sellerAddressStreetField.style.display = 'inline'; // Show input field again on label click
                sellerAddressStreetField.focus(); // Focus back on the input field for editing
                sellerStreetLabel.style.display = 'none'; // Hide the label while editing
            });
            
    // sellerCityLabel ===============================================================
            const sellerAddressCityField = document.getElementById('sellerAddressCityField');
            const sellerCityLabel = document.getElementById('sellerCityLabel');
        
            sellerAddressCityField.addEventListener('input', () => {
                const sellerAddressCity = sellerAddressCityField.value.trim(); // Trim to remove extra spaces
                if (sellerAddressCity.length > 0) {
                    sellerCityLabel.innerText = sellerAddressCity + ',';
                } else {
                    sellerCityLabel.innerText = '';
                }
            });
        
            sellerAddressCityField.addEventListener('blur', () => {
                const sellerAddressCity = sellerAddressCityField.value.trim();
                if (sellerAddressCity.length > 0) {
                    sellerAddressCityField.style.display = 'none'; // Hide input field
                   sellerCityLabel.style.display = 'inline'; // Show the label
                }
            });
        
            sellerCityLabel.addEventListener('click', () => {
                sellerAddressCityField.style.display = 'inline'; // Show input field again on label click
                sellerAddressCityField.focus(); // Focus back on the input field for editing
                sellerCityLabel.style.display = 'none'; // Hide the label while editing
            });
            
    // sellerStateLabel ===============================================================
            const sellerStateField = document.getElementById('sellerStateField');
            const sellerStateLabel = document.getElementById('sellerStateLabel');
        
            sellerStateField.addEventListener('input', () => {
                const sellerState = sellerStateField.value.trim(); // Trim to remove extra spaces
                if (sellerState.length > 0) {
                    sellerStateLabel.innerText = sellerState;
                } else {
                    sellerStateLabel.innerText = '';
                }
            });
        
            sellerStateField.addEventListener('blur', () => {
                const sellerState = sellerStateField.value.trim();
                if (sellerState.length > 0) {
                    sellerStateField.style.display = 'none'; // Hide input field
                   sellerStateLabel.style.display = 'inline'; // Show the label
                }
            });
        
            sellerStateLabel.addEventListener('click', () => {
                sellerStateField.style.display = 'inline'; // Show input field again on label click
                sellerStateField.focus(); // Focus back on the input field for editing
                sellerStateLabel.style.display = 'none'; // Hide the label while editing
            });
            
    // sellerZipLabel ===============================================================
            const sellerZipField = document.getElementById('sellerZipField');
            const sellerZipLabel = document.getElementById('sellerZipLabel');
        
            sellerZipField.addEventListener('input', () => {
                const sellerZip = sellerZipField.value.trim(); // Trim to remove extra spaces
                if (sellerZip.length > 0) {
                    sellerZipLabel.innerText = sellerZip;
                } else {
                    sellerZipLabel.innerText = '';
                }
            });
        
            sellerZipField.addEventListener('blur', () => {
                const sellerZip = sellerZipField.value.trim();
                if (sellerZip.length > 0) {
                    sellerZipField.style.display = 'none'; // Hide input field
                   sellerZipLabel.style.display = 'inline'; // Show the label
                }
            });
        
            sellerZipLabel.addEventListener('click', () => {
                sellerZipField.style.display = 'inline'; // Show input field again on label click
                sellerZipField.focus(); // Focus back on the input field for editing
                sellerZipLabel.style.display = 'none'; // Hide the label while editing
            });
            
    // sellerEmailLabel ===============================================================
            const sellerEmailField = document.getElementById('sellerEmailField');
            const sellerEmailLabel = document.getElementById('sellerEmailLabel');
        
            sellerEmailField.addEventListener('input', () => {
                const sellerEmail = sellerEmailField.value.trim(); // Trim to remove extra spaces
                if (sellerEmail.length > 0) {
                    sellerEmailLabel.innerText = sellerEmail;
                } else {
                    sellerEmailLabel.innerText = '';
                }
            });
        
            sellerEmailField.addEventListener('blur', () => {
                const sellerEmail = sellerEmailField.value.trim();
                if (sellerEmail.length > 0) {
                    sellerEmailField.style.display = 'none'; // Hide input field
                   sellerEmailLabel.style.display = 'inline'; // Show the label
                }
            });
        
            sellerEmailLabel.addEventListener('click', () => {
                sellerEmailField.style.display = 'inline'; // Show input field again on label click
                sellerEmailField.focus(); // Focus back on the input field for editing
                sellerEmailLabel.style.display = 'none'; // Hide the label while editing
            });
            
    // sellerXRPaddressLabel ===============================================================
            const sellerXRPaddressField = document.getElementById('sellerXRPaddressField');
            const sellerXRPaddressLabel = document.getElementById('sellerXRPaddressLabel');
        
            sellerXRPaddressField.addEventListener('input', () => {
                const sellerXRPaddress = sellerXRPaddressField.value.trim(); // Trim to remove extra spaces
                if (sellerXRPaddress.length > 0) {
                    sellerXRPaddressLabel.innerText = sellerXRPaddress;
                } else {
                    sellerXRPaddressLabel.innerText = '';
                }
            });
        
            sellerXRPaddressField.addEventListener('blur', () => {
                const sellerXRPaddress = sellerXRPaddressField.value.trim();
                if (sellerXRPaddress.length > 0) {
                    sellerXRPaddressField.style.display = 'none'; // Hide input field
                   sellerXRPaddressLabel.style.display = 'inline'; // Show the label
                }
            });
        
            sellerXRPaddressLabel.addEventListener('click', () => {
                sellerXRPaddressField.style.display = 'inline'; // Show input field again on label click
                sellerXRPaddressField.focus(); // Focus back on the input field for editing
                sellerXRPaddressLabel.style.display = 'none'; // Hide the label while editing
            });
            
    // vehicleTypeLabel ===============================================================
            const vehicleTypeField = document.getElementById('vehicleTypeField');
            const vehicleTypeLabel = document.getElementById('vehicleTypeLabel');
        
            vehicleTypeField.addEventListener('input', () => {
                const vehicleType = vehicleTypeField.value.trim(); // Trim to remove extra spaces
                if (vehicleType.length > 0) {
                    vehicleTypeLabel.innerText = vehicleType;
                } else {
                    vehicleTypeLabel.innerText = '';
                }
            });
        
            vehicleTypeField.addEventListener('blur', () => {
                const vehicleType = vehicleTypeField.value.trim();
                if (vehicleType.length > 0) {
                    vehicleTypeField.style.display = 'none'; // Hide input field
                   vehicleTypeLabel.style.display = 'inline'; // Show the label
                }
            });
        
            vehicleTypeLabel.addEventListener('click', () => {
                vehicleTypeField.style.display = 'inline'; // Show input field again on label click
                vehicleTypeField.focus(); // Focus back on the input field for editing
                vehicleTypeLabel.style.display = 'none'; // Hide the label while editing
            });
            
    // makeLabel ===============================================================
            const makeField = document.getElementById('makeField');
            const makeLabel = document.getElementById('makeLabel');
        
            makeField.addEventListener('input', () => {
                const make = makeField.value.trim(); // Trim to remove extra spaces
                if (make.length > 0) {
                    makeLabel.innerText = make;
                } else {
                    makeLabel.innerText = '';
                }
            });
        
            makeField.addEventListener('blur', () => {
                const make = makeField.value.trim();
                if (make.length > 0) {
                    makeField.style.display = 'none'; // Hide input field
                   makeLabel.style.display = 'inline'; // Show the label
                }
            });
        
            makeLabel.addEventListener('click', () => {
                makeField.style.display = 'inline'; // Show input field again on label click
                makeField.focus(); // Focus back on the input field for editing
                makeLabel.style.display = 'none'; // Hide the label while editing
            });
            
    // modelLabel ===============================================================
            const modelField = document.getElementById('modelField');
            const modelLabel = document.getElementById('modelLabel');
        
            modelField.addEventListener('input', () => {
                const model = modelField.value.trim(); // Trim to remove extra spaces
                if (model.length > 0) {
                    modelLabel.innerText = model;
                } else {
                    modelLabel.innerText = '';
                }
            });
        
            modelField.addEventListener('blur', () => {
                const model = modelField.value.trim();
                if (model.length > 0) {
                    modelField.style.display = 'none'; // Hide input field
                   modelLabel.style.display = 'inline'; // Show the label
                }
            });
        
            modelLabel.addEventListener('click', () => {
                modelField.style.display = 'inline'; // Show input field again on label click
                modelField.focus(); // Focus back on the input field for editing
                modelLabel.style.display = 'none'; // Hide the label while editing
            });
            
    // bodyTypeLabel ===============================================================
            const bodyTypeField = document.getElementById('bodyTypeField');
            const bodyTypeLabel = document.getElementById('bodyTypeLabel');
        
            bodyTypeField.addEventListener('input', () => {
                const bodyType = bodyTypeField.value.trim(); // Trim to remove extra spaces
                if (bodyType.length > 0) {
                    bodyTypeLabel.innerText = bodyType;
                } else {
                    bodyTypeLabel.innerText = '';
                }
            });
        
            bodyTypeField.addEventListener('blur', () => {
                const bodyType = bodyTypeField.value.trim();
                if (bodyType.length > 0) {
                    bodyTypeField.style.display = 'none'; // Hide input field
                   bodyTypeLabel.style.display = 'inline'; // Show the label
                }
            });
        
            bodyTypeLabel.addEventListener('click', () => {
                bodyTypeField.style.display = 'inline'; // Show input field again on label click
                bodyTypeField.focus(); // Focus back on the input field for editing
                bodyTypeLabel.style.display = 'none'; // Hide the label while editing
            });
            
    // yearLabel ===============================================================
            const yearField = document.getElementById('yearField');
            const yearLabel = document.getElementById('yearLabel');
        
            yearField.addEventListener('input', () => {
                const year = yearField.value.trim(); // Trim to remove extra spaces
                if (year.length > 0) {
                    yearLabel.innerText = year;
                } else {
                    yearLabel.innerText = '';
                }
            });
        
            yearField.addEventListener('blur', () => {
                const year = yearField.value.trim();
                if (year.length > 0) {
                    yearField.style.display = 'none'; // Hide input field
                   yearLabel.style.display = 'inline'; // Show the label
                }
            });
        
            yearLabel.addEventListener('click', () => {
                yearField.style.display = 'inline'; // Show input field again on label click
                yearField.focus(); // Focus back on the input field for editing
                yearLabel.style.display = 'none'; // Hide the label while editing
            });
            
    // vinLabel ===============================================================
            const vinField = document.getElementById('vinField');
            const vinLabel = document.getElementById('vinLabel');
        
            vinField.addEventListener('input', () => {
                const vin = vinField.value.trim(); // Trim to remove extra spaces
                if (vin.length > 0) {
                    vinLabel.innerText = vin;
                } else {
                    vinLabel.innerText = '';
                }
            });
        
            vinField.addEventListener('blur', () => {
                const vin = vinField.value.trim();
                if (vin.length > 0) {
                    vinField.style.display = 'none'; // Hide input field
                   vinLabel.style.display = 'inline'; // Show the label
                }
            });
        
            vinLabel.addEventListener('click', () => {
                vinField.style.display = 'inline'; // Show input field again on label click
                vinField.focus(); // Focus back on the input field for editing
                vinLabel.style.display = 'none'; // Hide the label while editing
            });
            
    // odometerLabel ===============================================================
            const odometerField = document.getElementById('odometerField');
            const odometerLabel = document.getElementById('odometerLabel');
        
            odometerField.addEventListener('input', () => {
                const odometer = odometerField.value.trim(); // Trim to remove extra spaces
                if (odometer.length > 0) {
                    odometerLabel.innerText = odometer;
                } else {
                    odometerLabel.innerText = '';
                }
            });
        
            odometerField.addEventListener('blur', () => {
                const odometer = odometerField.value.trim();
                if (odometer.length > 0) {
                    odometerField.style.display = 'none'; // Hide input field
                   odometerLabel.style.display = 'inline'; // Show the label
                }
            });
        
            odometerLabel.addEventListener('click', () => {
                odometerField.style.display = 'inline'; // Show input field again on label click
                odometerField.focus(); // Focus back on the input field for editing
                odometerLabel.style.display = 'none'; // Hide the label while editing
            });
            
    // purchaseAmountLabel ===============================================================
            const purchaseAmountField = document.getElementById('purchaseAmountField');
            const purchaseAmountLabel = document.getElementById('purchaseAmountLabel');
        
            purchaseAmountField.addEventListener('input', () => {
                const purchaseAmount = purchaseAmountField.value.trim(); // Trim to remove extra spaces
                if (purchaseAmount.length > 0) {
                    purchaseAmountLabel.innerText = '$' + purchaseAmount;
                } else {
                    purchaseAmountLabel.innerText = '';
                }
            });
        
            purchaseAmountField.addEventListener('blur', () => {
                const purchaseAmount = purchaseAmountField.value.trim();
                if (purchaseAmount.length > 0) {
                    purchaseAmountField.style.display = 'none'; // Hide input field
                   purchaseAmountLabel.style.display = 'inline'; // Show the label
                }
            });
        
            purchaseAmountLabel.addEventListener('click', () => {
                purchaseAmountField.style.display = 'inline'; // Show input field again on label click
                purchaseAmountField.focus(); // Focus back on the input field for editing
                purchaseAmountLabel.style.display = 'none'; // Hide the label while editing
            });
            
    // signingSellerAgentNameLabel ===============================================================
            const signingSellerAgentNameField = document.getElementById('signingSellerAgentNameField');
            const signingSellerAgentNameLabel = document.getElementById('signingSellerAgentNameLabel');
        
            signingSellerAgentNameField.addEventListener('input', () => {
                const signingSellerAgentName = signingSellerAgentNameField.value.trim(); // Trim to remove extra spaces
                if (signingSellerAgentName.length > 0) {
                    signingSellerAgentNameLabel.innerText = signingSellerAgentName + ',';
                } else {
                    signingSellerAgentNameLabel.innerText = '';
                }
            });
        
            signingSellerAgentNameField.addEventListener('blur', () => {
                const signingSellerAgentName = signingSellerAgentNameField.value.trim();
                if (signingSellerAgentName.length > 0) {
                    signingSellerAgentNameField.style.display = 'none'; // Hide input field
                   signingSellerAgentNameLabel.style.display = 'inline'; // Show the label
                }
            });
        
            signingSellerAgentNameLabel.addEventListener('click', () => {
                signingSellerAgentNameField.style.display = 'inline'; // Show input field again on label click
                signingSellerAgentNameField.focus(); // Focus back on the input field for editing
                signingSellerAgentNameLabel.style.display = 'none'; // Hide the label while editing
            });
            
    // signingSellerAgentTitleLabel ===============================================================
            const signingSellerAgentTitleField = document.getElementById('signingSellerAgentTitleField');
            const signingSellerAgentTitleLabel = document.getElementById('signingSellerAgentTitleLabel');
        
            signingSellerAgentTitleField.addEventListener('input', () => {
                const signingSellerAgentTitle = signingSellerAgentTitleField.value.trim(); // Trim to remove extra spaces
                if (signingSellerAgentTitle.length > 0) {
                    signingSellerAgentTitleLabel.innerText = signingSellerAgentTitle;
                } else {
                    signingSellerAgentTitleLabel.innerText = '';
                }
            });
        
            signingSellerAgentTitleField.addEventListener('blur', () => {
                const signingSellerAgentTitle = signingSellerAgentTitleField.value.trim();
                if (signingSellerAgentTitle.length > 0) {
                    signingSellerAgentTitleField.style.display = 'none'; // Hide input field
                   signingSellerAgentTitleLabel.style.display = 'inline'; // Show the label
                }
            });
        
            signingSellerAgentTitleLabel.addEventListener('click', () => {
                signingSellerAgentTitleField.style.display = 'inline'; // Show input field again on label click
                signingSellerAgentTitleField.focus(); // Focus back on the input field for editing
                signingSellerAgentTitleLabel.style.display = 'none'; // Hide the label while editing
            });
            
    // signingBuyerAgentNameLabel ===============================================================
            const signingBuyerAgentNameField = document.getElementById('signingBuyerAgentNameField');
            const signingBuyerAgentNameLabel = document.getElementById('signingBuyerAgentNameLabel');
        
            signingBuyerAgentNameField.addEventListener('input', () => {
                const signingBuyerAgentName = signingBuyerAgentNameField.value.trim(); // Trim to remove extra spaces
                if (signingBuyerAgentName.length > 0) {
                    signingBuyerAgentNameLabel.innerText = signingBuyerAgentName + ',';
                } else {
                    signingBuyerAgentNameLabel.innerText = '';
                }
            });
        
            signingBuyerAgentNameField.addEventListener('blur', () => {
                const signingBuyerAgentName = signingBuyerAgentNameField.value.trim();
                if (signingBuyerAgentName.length > 0) {
                    signingBuyerAgentNameField.style.display = 'none'; // Hide input field
                   signingBuyerAgentNameLabel.style.display = 'inline'; // Show the label
                }
            });
        
            signingBuyerAgentNameLabel.addEventListener('click', () => {
                signingBuyerAgentNameField.style.display = 'inline'; // Show input field again on label click
                signingBuyerAgentNameField.focus(); // Focus back on the input field for editing
                signingBuyerAgentNameLabel.style.display = 'none'; // Hide the label while editing
            });
            
    // signingBuyerAgentTitleLabel ===============================================================
            const signingBuyerAgentTitleField = document.getElementById('signingBuyerAgentTitleField');
            const signingBuyerAgentTitleLabel = document.getElementById('signingBuyerAgentTitleLabel');
        
            signingBuyerAgentTitleField.addEventListener('input', () => {
                const signingBuyerAgentTitle = signingBuyerAgentTitleField.value.trim(); // Trim to remove extra spaces
                if (signingBuyerAgentTitle.length > 0) {
                    signingBuyerAgentTitleLabel.innerText = signingBuyerAgentTitle;
                } else {
                    signingBuyerAgentTitleLabel.innerText = '';
                }
            });
        
            signingBuyerAgentTitleField.addEventListener('blur', () => {
                const signingBuyerAgentTitle = signingBuyerAgentTitleField.value.trim();
                if (signingBuyerAgentTitle.length > 0) {
                    signingBuyerAgentTitleField.style.display = 'none'; // Hide input field
                   signingBuyerAgentTitleLabel.style.display = 'inline'; // Show the label
                }
            });
        
            signingBuyerAgentTitleLabel.addEventListener('click', () => {
                signingBuyerAgentTitleField.style.display = 'inline'; // Show input field again on label click
                signingBuyerAgentTitleField.focus(); // Focus back on the input field for editing
                signingBuyerAgentTitleLabel.style.display = 'none'; // Hide the label while editing
            });
        });

        // ====================== VALIDATE NUMBER INPUTS ======================
        function validateInput(id, type = 'number') {
            const input = document.getElementById(id);
            if (type === 'number') {
                const value = parseFloat(input.value);
                if (isNaN(value)) {
                    input.style.borderBottom = '1px solid red';
                    return false;
                } else {
                    input.style.borderBottom = '1px solid gray';
                    return true;
                }
            }
            // Add other types if necessary
            return true;
        }
        
        document.getElementById('buyerNameFirstLabel').innerText = buyerNameField + ', authorized signing agent:';
        document.getElementById('sellerNameFirstLabel').innerText = sellerNameField + ', authorized signing agent:';
        
        document.getElementById('purchaseAmountField').addEventListener('input', () => {
            if (validateInput('purchaseAmountField')) {
                calculatePurchaseAmountXRP();
            }
        });

        // document.getElementById('agentPercentField').addEventListener('input', () => {
        //     if (validateInput('agentPercentField')) {
        //         calculateAgentAmounts();
        //     }
        // });

    <!-- ====================== XRPUSD CALCULATIONS ======================= -->
        let xrpusd = 0;
        let lastFetched = 0;
        const fetchInterval = 60 * 60 * 1000; // 1 hour

        // Function to fetch XRP to USD rate using CoinGecko API
        async function fetchXRPUSD() {
            const now = Date.now();
            if (xrpusd === 0 || (now - lastFetched) > fetchInterval) {
                try {
                    const response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=ripple&vs_currencies=usd');
                    const data = await response.json();
                    xrpusd = data.ripple.usd;
                    lastFetched = now;
                    document.getElementById('xrpusdLabel').innerText = xrpusd.toFixed(2);
                    console.log('1 XRP = $' + xrpusd);
                } catch (error) {
                    console.error('Error fetching XRP to USD rate:', error);
                    xrpusd = 0;
                    document.getElementById('xrpusdLabel').innerText = '0.00';
                }
            }
        }

        // Function to calculate Purchase Amount in XRP
        function calculatePurchaseAmountXRP() {
            const purchaseAmount = parseFloat(document.getElementById('purchaseAmountField').value);
            if (isNaN(purchaseAmount) || xrpusd === 0) {
                document.getElementById('xrpPurchaseAmountLabel').innerText = '0.0000';
                return;
            }
            const purchaseAmountXRP = purchaseAmount / xrpusd;
            document.getElementById('xrpPurchaseAmountLabel').innerText = purchaseAmountXRP.toFixed(4);
            console.log(`Purchase amount = $${purchaseAmount} = ${purchaseAmountXRP.toFixed(4)} XRP`);
            // calculateAgentAmounts();
        }

        document.addEventListener("DOMContentLoaded", () => {
            fetchXRPUSD(); // Fetch XRP to USD rate on page load

        document.getElementById('purchaseAmountField').addEventListener('input', calculatePurchaseAmountXRP);
        });
        
    // getPaymentHash() ==============================================================    
        async function getPaymentHash() {
            const buyerAddress = document.getElementById('buyerXRPaddressField').value;
            if (!buyerAddress) {
                alert('Please enter Buyer XRP Address.');
                return;
            }

            const api = new xrpl.Client('wss://xrplcluster.com/');
            // const api = new xrpl.Client('wss://testnet.xrpl-labs.com/');
            await api.connect();
            let response3 = await api.request({
                "command": "account_tx",
                "account": buyerAddress,
                "limit": 1
            });

            if (response3.result.transactions.length === 0) {
                alert('No transactions found for this account.');
                api.disconnect();
                return;
            }

            const paymentHash = response3.result.transactions[0].tx.hash;
            // const paymentHash = response3.result.transactions[0].tx.hash;
            console.log("Payment tx.hash: " + paymentHash);

            const paymentHashLink = "https://bithomp.com/explorer/";
            // const paymentHashLink = "https://testnet.xrpl.org/transactions/";
            const xrpExplorerLink = paymentHashLink.concat(paymentHash);

            document.getElementById('step_5').style.display = 'none';
            document.getElementById('getPaymentHashButton').style.display = 'none';
            document.getElementById('paymentSignedDateLabel').innerText = "Date: " + new Date().toLocaleDateString();

            const link3 = document.createElement('a');
            link3.href = xrpExplorerLink;
            link3.target = "_blank";
            link3.rel = "noopener noreferrer";
            link3.innerText = paymentHash;
            const label = document.getElementById('paymentHashLabel');
            label.innerText = "tx.hash: ";
            label.appendChild(link3);

            await api.disconnect();
        }
    </script>

 <!-- ============================== JAVASCRIPT FOR XUMM INTEGRATION ======================= -->
    <script type="module">
        import 'https://xumm.app/assets/cdn/xumm-oauth2-pkce.min.js?v=2.7.1';
        const xumm = new XummPkce('756e02e8-4dbc-4827-8917-e1fd94e62f58', {
            implicit: true, // Implicit: allows to e.g. move from social browser to stock browser
            redirectUrl: document.location.href + '?custom_state=test'
        });

        document.getElementById('sellerSignIn').onclick = () => xumm.authorize().catch(e => console.log('e', e));
        document.getElementById('buyerSignIn').onclick = () => xumm.authorize().catch(e => console.log('e', e));

        const signedIn = async () => {
            const state = await xumm.state();
            if (state?.me?.sub) {
                if (state.me.sub === document.getElementById('sellerXRPaddressField').value) {
                    document.getElementById('sellerSignIn').style.display = 'none';
                    document.getElementById('step_1').style.display = 'none';
                    document.getElementById('sub_1').innerText = state.me.sub;
                    document.getElementById('signedBySellerAgentName').innerText = '  ' + document.getElementById('signingSellerAgentNameField').value + ', ';
                    document.getElementById('signedBySellerAgentTitle').innerText = document.getElementById('signingSellerAgentTitleField').value;
                    document.getElementById('sellerSignedDateLabel').innerText = ' ' + new Date().toLocaleDateString();
                } else if (state.me.sub === document.getElementById('buyerXRPaddressField').value) {
                    document.getElementById('buyerSignIn').style.display = 'none';
                    document.getElementById('step_3').style.display = 'none';
                    document.getElementById('sub_2').innerText = state.me.sub;
                    document.getElementById('signedByBuyerAgentName').innerText = '  ' + document.getElementById('signingBuyerAgentNameField').value + ', ';
                    document.getElementById('signedByBuyerAgentTitle').innerText = document.getElementById('signingBuyerAgentTitleField').value;
                    document.getElementById('buyerSignedDateLabel').innerText = ' ' + new Date().toLocaleDateString();
                } else {
                    document.getElementById('notAuthorizedAddressLogoutButton').style.display = 'block';
                    alert("ADDRESS NOT AUTHORIZED TO SIGN THIS DOCUMENT"); 
                    document.getElementById('notAuthorizedAddressLabel').innerText = 
                        "xxxxxx ADDRESS NOT AUTHORIZED TO SIGN THIS DOCUMENT xxxxxx";
                    xumm.logout()
                    document.getElementById('lenderSignIn').style.display = 'block'
                    document.getElementById('borrowerSignIn').style.display = 'block'
                }
            }
        }

        document.getElementById('buyerPaymentButton').onclick = async () => {
            const encoder = new TextEncoder();
            const message = 'Wyoming Motor Vehicle Bill of Sale Payment';
            const messageAsUint8Array = encoder.encode(message);
            const hex = Array.from(messageAsUint8Array)
                .map(b => b.toString(16).padStart(2, '0'))
                .join('')
                .toUpperCase();
            console.log('Message Hex: ' + hex);

            const purchaseAmountXRP = parseFloat(document.getElementById('xrpPurchaseAmountLabel').innerText);
            const purchaseAmountUSD = parseFloat(document.getElementById('purchaseAmountField').value);
            const sellerXRPaddress = document.getElementById('sellerXRPaddressField').value;

            console.log('Purchase Amount USD: ' + purchaseAmountUSD);
            console.log('Purchase Amount XRP: ' + purchaseAmountXRP);
            console.log('Buyer XRP Address: ' + document.getElementById('buyerXRPaddressField').value);
            console.log('Seller XRP Address: ' + document.getElementById('sellerXRPaddressField').value);

            const { sdk } = await xumm.state();
            const payload = await sdk.payload.create({
                TransactionType: 'Payment',
                Destination: sellerXRPaddress,
                Amount: (purchaseAmountXRP * 1000000).toFixed(0),
                Memos: [{
                    Memo: {
                        MemoData: hex
                    }
                }],
            });
            
            if (payload.pushed) {
                alert('Payload `' + payload.uuid + '` pushed to your phone.');
            } else {
                // You can also render `payload.refs.qr_png` in your UI
                alert('Payload not pushed, opening payload...');
                window.open(payload.next.always);
            }
            
            document.getElementById('step_4').style.display = 'none';
            document.getElementById('paymentPaidLabel').innerText = 'Buyer paid to Seller: $' + purchaseAmountUSD + ' = ' + purchaseAmountXRP.toFixed(4) + ' XRP';
            document.getElementById('buyerPaymentButton').style.display = 'none';
        };

        document.getElementById('sellerLogout').onclick = () => {
            xumm.logout();
            document.getElementById('step_2').style.display = 'none';
            document.getElementById('sellerLogout').style.display = 'none';
        }

        document.getElementById('buyerLogout').onclick = () => {
            xumm.logout();
            document.getElementById('step_6').style.display = 'none';
            document.getElementById('buyerLogout').style.display = 'none';
        }

        document.getElementById('notAuthorizedAddressLogoutButton').onclick = () => {
            xumm.logout();
            document.getElementById('notAuthorizedAddressLogoutButton').style.display = 'none';
            document.getElementById('notAuthorizedAddressLabel').innerText = ' ';
        }

        // Xumm Event Listeners
        xumm.on("error", error => console.log("error", error));
        xumm.on("success", () => signedIn());
        xumm.on("retrieved", () => signedIn());

        document.getElementById('generatePDF').onclick = async () => {
            document.getElementById('step_7').style.display = 'none';
            document.getElementById('generatePDF').style.display = 'none';
            var element = document.getElementById('WyomingBillOfSaleForm');
            var opt = {
                margin: 1,
                filename: 'WyomingBillofSale.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2, willReadFrequently: true },
                jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' },
                enableLinks: true,
                pagebreak: { mode: ['avoid-all', 'css'], before: '.pagebreak' }
            };
            html2pdf().set(opt).from(element).toPdf().save();
        }
    </script>
</body>
</html>
